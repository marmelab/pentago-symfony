{% extends 'base.html.twig' %}

{% block title %}Play to Pentago !
{% endblock %}

{% block stylesheets %}
	{{ parent() }}

	<link href="{{ asset('css/game.css') }}" rel="stylesheet"/>
{% endblock %}

{% block body %}

<form action="{{action}}" method="POST" class="game-container player-turn--{{playerTurn}}">
        {% if playerTurn == 1 %}
            <h2 class="player-color--1">Player 1, this is your turn !</h2>
        {% else %}
            <h2 class="player-color--2">Player 2, this is your turn !</h2>
        {% endif %}

		{% if turnStatus == constant('App\\Service\\GameService::ADD_MARBLE_STATUS') %}
			<h3>Please add a marble</h3>
		{% else %}
			<h3>Please turn a quarter</h3>
		{% endif %}

		{# Each cell has a couple of coords as value : "row-column" (e.g : "O-5")
        Twig inject in loops an object "loop".
        loop.index is the iterator (start 1 to 6).
        loop.parent be able to access to the first loop object.
        #}

        <div class="board">
            {% for row in board %}
                <div class="row">
                    {% for value in row %}
                        <button type="submit" name="position" {% if turnStatus != constant('App\\Service\\GameService::ADD_MARBLE_STATUS') or value != 0 %} disabled="disabled" {% endif %} value="{{loop.parent.loop.index}}-{{loop.index}}" class="cell">
							<div class="marble player-bg--{{value}}"></div>
					
						</button>
                    {% endfor %}
                </div>
			{% endfor %}
			{% if turnStatus == constant('App\\Service\\GameService::ROTATE_QUARTER_STATUS') %}
				<div class="rotate-controls-overlay">
					<div class="rotate-controls-quarter">
						<button type="submit" name="rotation-key" value="0">
							<img class="icon icon--inversed" src="{{ asset('svg/rotate.svg') }}" alt="counter-clockwise rotation icon"/>
						</button>
						<button type=" submit" name="rotation-key" value="1">
							<img class="icon" src="{{ asset('svg/rotate.svg') }}" alt="clockwise rotation icon"/>
						</button>
					</div>
					<div class="rotate-controls-quarter">
						<button type="submit" name="rotation-key" value="2">
							<img class="icon icon--inversed" src="{{ asset('svg/rotate.svg') }}" alt="counter-clockwise rotation icon"/>
						</button>
						<button type=" submit" name="rotation-key" value="3">
							<img class="icon" src="{{ asset('svg/rotate.svg') }}" alt="clockwise rotation icon"/>
						</button>
					</div>
					<div class="rotate-controls-quarter">
						<button type="submit" name="rotation-key" value="6">
							<img class="icon icon--inversed" src="{{ asset('svg/rotate.svg') }}" alt="counter-clockwise rotation icon"/>
						</button>
						<button type=" submit" name="rotation-key" value="7">
							<img class="icon" src="{{ asset('svg/rotate.svg') }}" alt="clockwise rotation icon"/>
						</button>
					</div>
					<div class="rotate-controls-quarter">
						<button type="submit" name="rotation-key" value="4">
							<img class="icon icon--inversed" src="{{ asset('svg/rotate.svg') }}" alt="counter-clockwise rotation icon"/>
						</button>
						<button type=" submit" name="rotation-key" value="5">
							<img class="icon" src="{{ asset('svg/rotate.svg') }}" alt="clockwise rotation icon"/>
						</button>
					</div>
				</div>
			{% endif %}
        </div>
	</form>
{% endblock %}
